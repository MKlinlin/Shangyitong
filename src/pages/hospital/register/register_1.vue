<template>
  <div class="wrap">
    <div class="top">
      <div class="hosname">
        {{ workData.baseMap?.hosname }}
      </div>
      <div class="line">|</div>
      <div>{{ workData.baseMap?.bigname }}</div>
      <div class="dot">.</div>
      <div class="hospartment">{{ workData.baseMap?.depname }}</div>
    </div>
    <div class="center">
      <h1>{{ workData.baseMap?.workDateString }}</h1>
      <div class="container">
        <div
          class="item"
          :class="{ active: item.status == -1 || item.availableNumber == -1 }"
          v-for="item in workData.bookingScheduleList"
          :key="item"
        >
          <div class="above">{{ item.workDate }}-{{ item.dayOfWeek }}</div>
          <div class="bottom">
            <div v-if="item.status == -1">停止挂号</div>
            <div v-if="item.status == 0">
              {{
                item.availableNumber == -1
                  ? "已约满"
                  : `有号(${item.availableNumber})`
              }}
            </div>
            <div v-if="item.status == 1">即将放号</div>
          </div>
        </div>
      </div>
      <el-pagination
        v-model:current-page="pageNo"
        layout="prev,pager,next"
        :total="workData.total"
        @current-change="fetchWorkData"
      />
    </div>
    <div class="below">
      <!-- 展示放号时间 -->
      <div class="will">
        <span class="time">2024.8.6</span>
        <span>放号</span>
      </div>
      <!-- 展示医生结构：上午，下午 -->
      <div class="doc">
        <div class="am">
          <div class="icon">
            <svg
              t="1712563508920"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="4529"
              width="16"
              height="16"
            >
              <path
                d="M294.26442 188.721224a25.889554 25.889554 0 0 0 25.548903-25.889554v-136.260812a25.889554 25.889554 0 0 0-51.438457 0v136.260812a25.889554 25.889554 0 0 0 25.889554 25.889554z m392.090486 0a25.548902 25.548902 0 0 0 25.548902-25.889554v-136.260812a25.548902 25.548902 0 0 0-51.097804 0v136.260812a25.548902 25.548902 0 0 0 25.548902 25.889554z m143.755157 562.757153a136.260812 136.260812 0 1 0 136.260811 136.260811 136.260812 136.260812 0 0 0-136.260811-136.260811z m59.954757 177.139055a10.594278 10.594278 0 0 1-14.98869 14.988689l-44.966067-44.966068-43.944112 44.966068a10.219561 10.219561 0 0 1-10.219561 2.725216 10.900865 10.900865 0 0 1-7.494345-7.494344 10.219561 10.219561 0 0 1 2.725216-10.219561l44.966068-44.966068L771.177261 838.344644a10.594278 10.594278 0 1 1 14.98869-14.988689l45.30672 45.30672 44.966068-45.30672a10.219561 10.219561 0 0 1 10.21956-2.725216 10.900865 10.900865 0 0 1 7.494345 7.494344 10.219561 10.219561 0 0 1-2.725216 10.219561l-44.966068 45.30672zM464.590435 715.369261a18.735862 18.735862 0 0 1 14.648037 4.769129 21.120426 21.120426 0 0 1 4.087825 14.307385 20.09847 20.09847 0 0 1-4.428477 13.285429 18.39521 18.39521 0 0 1-14.307385 4.769129H200.925764a18.054558 18.054558 0 0 1-13.966733-3.065869 18.39521 18.39521 0 0 1-4.428476-13.285429 21.120426 21.120426 0 0 1 4.087824-14.307385 18.39521 18.39521 0 0 1 14.307385-6.472389H287.45138v-225.511643a17.373253 17.373253 0 0 1 4.428476-12.944777 21.461078 21.461078 0 0 1 13.966733-3.747172 23.164338 23.164338 0 0 1 14.307386 3.747172 17.373253 17.373253 0 0 1 4.769128 14.307385v78.009315h117.184298a17.373253 17.373253 0 0 1 14.307385 4.769128 18.735862 18.735862 0 0 1 4.428477 13.626081 21.80173 21.80173 0 0 1-3.747173 13.626082 16.351297 16.351297 0 0 1-13.966733 5.10978H324.923103V715.369261z m314.421823-97.767132a14.988689 14.988689 0 0 1 13.626081 5.109781 20.779774 20.779774 0 0 1 3.406521 12.604125 21.461078 21.461078 0 0 1-3.406521 13.285429 17.032601 17.032601 0 0 1-13.626081 4.087824h-105.602129V749.434464a15.669993 15.669993 0 0 1-5.450432 13.626082 27.933466 27.933466 0 0 1-13.626082 3.40652 30.658683 30.658683 0 0 1-13.285429-3.40652 14.307385 14.307385 0 0 1-6.131736-13.626082v-95.72322h-119.568863a17.032601 17.032601 0 0 1-13.626081-4.087824 21.461078 21.461078 0 0 1-3.40652-13.285429 20.779774 20.779774 0 0 1 3.40652-12.604125 14.988689 14.988689 0 0 1 13.626081-5.109781H634.91645v-79.371923h-50.757153a261.620758 261.620758 0 0 1-19.417165 26.230207c-6.472389 7.834997-13.966733 16.010645-21.80173 23.845642a21.461078 21.461078 0 0 1-15.669993 8.5163 19.417166 19.417166 0 0 1-13.28543-9.538256 14.307385 14.307385 0 0 1-4.087824-14.307386 34.065203 34.065203 0 0 1 8.856953-12.604125 302.499002 302.499002 0 0 0 28.955422-34.065203 190.765136 190.765136 0 0 0 23.164338-43.262807 26.230206 26.230206 0 0 1 8.856953-13.28543 16.691949 16.691949 0 0 1 14.307385-2.043912c8.856953 2.043912 13.626081 5.10978 14.98869 9.878909a30.318031 30.318031 0 0 1-3.747173 19.417166 12.263473 12.263473 0 0 1 0 3.065868v3.065868h164.194278a16.010645 16.010645 0 0 1 13.626082 5.109781 20.779774 20.779774 0 0 1 3.747172 12.944777 17.713906 17.713906 0 0 1-3.747172 12.263473 16.691949 16.691949 0 0 1-13.626082 4.769128h-97.42648v79.031271z m0 0"
                fill="#51A9FF"
                p-id="4530"
              ></path>
              <path
                d="M668.981653 933.38656H132.795359a25.889554 25.889554 0 0 1-25.548903-25.889554V343.036593a25.889554 25.889554 0 0 1 25.548903-25.889554H852.933749a25.889554 25.889554 0 0 1 25.889554 25.889554v380.508317a170.326015 170.326015 0 0 1 51.438456 23.845642V187.358616a77.668663 77.668663 0 0 0-77.32801-76.987359h-76.987359v45.988024a85.844311 85.844311 0 0 1-170.326015 0V110.371257H381.811992v45.988024a86.184963 86.184963 0 0 1-172.029275 0V110.371257H132.795359A77.328011 77.328011 0 0 0 55.808 187.358616v720.13839a77.328011 77.328011 0 0 0 76.987359 77.328011h558.328676A174.413839 174.413839 0 0 1 668.981653 933.38656z m0 0"
                fill="#51A9FF"
                p-id="4531"
              ></path>
            </svg>
            <span style="color: #7f7f7f; font-weight: 700">上午号源</span>
          </div>
          <div class="docInfo">
            <div class="left">
              <div class="info">
                <span>副主任医师</span>
                <span>|</span>
                <span>张三</span>
              </div>
              <div class="skills">python,java,js</div>
            </div>
            <div class="right">
              <div class="money">￥100</div>
              <el-button type="primary" size="default">100</el-button>
            </div>
          </div>
          <div class="docInfo">
            <div class="left">
              <div class="info">
                <span>副主任医师</span>
                <span>|</span>
                <span>张三</span>
              </div>
              <div class="skills">
                这个 css 属性设置元素左下角的圆角。圆角可以是圆或椭圆
              </div>
            </div>
            <div class="right">
              <div class="money">￥100</div>
              <el-button type="primary" size="default">100</el-button>
            </div>
          </div>
        </div>
        <div class="pm">
          <div class="icon">
            <svg
              t="1712567142093"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="4539"
              width="16"
              height="16"
            >
              <path
                d="M261.062136 189.718094a25.59147 25.59147 0 0 0 25.591469-25.59147v-136.487837a26.273909 26.273909 0 0 0-11.601466-23.885371 26.615128 26.615128 0 0 0-26.615128 0 24.90903 24.90903 0 0 0-12.283906 23.202932v136.487837a25.59147 25.59147 0 0 0 24.909031 26.273909z m392.061312 0a25.59147 25.59147 0 0 0 25.59147-25.59147v-136.487837a25.932689 25.932689 0 0 0-51.524159 0v136.487837a25.932689 25.932689 0 0 0 25.59147 25.59147z m143.994669 561.306231a136.487837 136.487837 0 1 1-136.487837 136.487838 136.487837 136.487837 0 0 1 136.487837-136.487838z m60.054648 177.092969a10.611929 10.611929 0 1 1-15.013662 15.013662l-44.699767-45.040986-45.040986 46.064645a10.577807 10.577807 0 0 1-10.236588 3.412196 11.260247 11.260247 0 0 1-7.84805-7.848051 10.236588 10.236588 0 0 1 3.070976-10.236587l45.040986-45.040987-43.676108-44.699766a10.611929 10.611929 0 0 1 15.013663-15.013663l44.699766 44.699767 42.652449-44.699767a10.577807 10.577807 0 0 1 14.331223 0 10.577807 10.577807 0 0 1 0 14.672443l-44.699766 44.699767z m-113.626124-309.827391a15.696101 15.696101 0 0 1 13.648783 5.118294 20.814395 20.814395 0 0 1 3.412196 12.625125 21.155615 21.155615 0 0 1-3.412196 13.307564 17.743419 17.743419 0 0 1-13.648783 4.094635h-107.142953v97.588804a15.013662 15.013662 0 0 1-5.459513 13.648784 26.956348 26.956348 0 0 1-13.648784 3.412196 29.686105 29.686105 0 0 1-13.307564-3.412196 14.672443 14.672443 0 0 1-5.800733-13.648784v-96.223925h-117.038321a16.71976 16.71976 0 0 1-13.648783-4.435855 26.273909 26.273909 0 0 1 0-25.591469 15.013662 15.013662 0 0 1 13.648783-5.118294h118.403199v-79.162946h-49.476841a281.847384 281.847384 0 0 1-19.108297 25.932689c-6.824392 7.848051-14.331223 16.037321-21.838054 23.885372a23.544152 23.544152 0 0 1-16.037321 8.53049 19.790736 19.790736 0 0 1-13.307564-9.554149 15.696101 15.696101 0 0 1-4.094635-14.331223 37.875375 37.875375 0 0 1 9.212929-12.625125 268.1986 268.1986 0 0 0 28.662446-34.121959 186.988337 186.988337 0 0 0 23.202932-42.993669 29.686105 29.686105 0 0 1 8.87171-13.307564 15.354882 15.354882 0 0 1 14.331222-2.047318c8.871709 2.047318 13.648784 5.118294 15.013663 9.554149a36.169277 36.169277 0 0 1-3.753416 19.790736v6.141953h164.126624a15.354882 15.354882 0 0 1 13.307565 5.118294 19.108297 19.108297 0 0 1 3.753415 12.625125 18.425858 18.425858 0 0 1-3.753415 12.625125 16.037321 16.037321 0 0 1-13.307565 4.435854h-98.953682v79.162946z m0 0"
                fill="#51A9FF"
                p-id="4540"
              ></path>
              <path
                d="M634.015151 933.918027H98.982829a25.932689 25.932689 0 0 1-25.59147-25.591469V343.94935a25.932689 25.932689 0 0 1 25.59147-25.591469h719.632122a25.59147 25.59147 0 0 1 25.59147 25.591469v380.459847a168.22126 168.22126 0 0 1 51.524158 23.544152V188.694435a77.456848 77.456848 0 0 0-77.115628-77.115628H741.840543v46.064645a85.987338 85.987338 0 0 1-170.609797 0V111.578807H347.731912v46.064645a85.987338 85.987338 0 0 1-170.609796 0V111.578807H98.982829A77.798067 77.798067 0 0 0 22.20842 188.694435v719.632123a77.798067 77.798067 0 0 0 77.115628 77.115628h557.894036a176.41053 176.41053 0 0 1-23.544152-51.524159z m0 0"
                fill="#51A9FF"
                p-id="4541"
              ></path>
              <path
                d="M198.61895 516.606465a15.354882 15.354882 0 0 1-12.283905-4.435855 18.425858 18.425858 0 0 1-4.777075-12.283906 17.743419 17.743419 0 0 1 4.777075-12.283905 15.354882 15.354882 0 0 1 12.283905-4.435855h238.853715a15.696101 15.696101 0 0 1 11.942686 4.435855 17.402199 17.402199 0 0 1 4.777074 12.283905 17.743419 17.743419 0 0 1-4.777074 11.942686 15.696101 15.696101 0 0 1-11.942686 4.777075H329.306054v217.015661a23.885372 23.885372 0 0 1-5.118294 13.648784 17.06098 17.06098 0 0 1-11.942685 4.777074 18.425858 18.425858 0 0 1-11.942686-4.435855 19.449517 19.449517 0 0 1-4.777075-13.990003v-217.015661z m149.454182 75.40953a18.767078 18.767078 0 0 1-7.165612-12.625125 15.354882 15.354882 0 0 1 5.118294-11.942686 16.37854 16.37854 0 0 1 11.601467-6.141953 23.544152 23.544152 0 0 1 13.307564 6.141953 399.909364 399.909364 0 0 1 60.737087 71.997334 20.473176 20.473176 0 0 1 3.753416 13.648784 17.402199 17.402199 0 0 1-7.165612 11.601466 19.108297 19.108297 0 0 1-12.966344 2.729757 21.496834 21.496834 0 0 1-11.601466-8.87171 472.930357 472.930357 0 0 0-54.936355-66.53782z m0 0"
                fill="#51A9FF"
                p-id="4542"
              ></path>
              <path
                d="M854.101789 927.093635a10.236588 10.236588 0 0 1 0 14.331223 10.577807 10.577807 0 0 1-14.672443 0l-44.699766-44.699766-44.699767 44.699766a10.577807 10.577807 0 0 1-17.743419-4.777074 10.577807 10.577807 0 0 1 2.729757-9.895368l44.699767-45.040986-44.699767-44.699767a10.236588 10.236588 0 0 1 0-14.672443 10.577807 10.577807 0 0 1 15.013662 0l44.699767 44.699767 44.699766-44.699767a10.236588 10.236588 0 0 1 10.236588-2.729756 9.895368 9.895368 0 0 1 7.506831 7.506831 9.895368 9.895368 0 0 1-2.729756 9.895368l-44.699767 44.699767z"
                fill="#FFFFFF"
                p-id="4543"
              ></path>
            </svg>
            <span style="color: #7f7f7f; font-weight: 700">下午号源</span>
          </div>
          <div class="docInfo">
            <div class="left">
              <div class="info">
                <span>副主任医师</span>
                <span>|</span>
                <span>张三</span>
              </div>
              <div class="skills">python,java,js</div>
            </div>
            <div class="right">
              <div class="money">￥100</div>
              <el-button type="primary" size="default">100</el-button>
            </div>
          </div>
          <div class="docInfo">
            <div class="left">
              <div class="info">
                <span>副主任医师</span>
                <span>|</span>
                <span>张三</span>
              </div>
              <div class="skills">
                这个 css 属性设置元素左下角的圆角。圆角可以是圆或椭圆
              </div>
            </div>
            <div class="right">
              <div class="money">￥100</div>
              <el-button type="primary" size="default">100</el-button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang='ts'>
import { onMounted, ref } from "vue";
import { reqHospitalWork } from "@/api/hospital";
import type { HospitalWordData } from "@/api/hospital/type";
import { useRoute } from "vue-router";

let $route = useRoute();
onMounted(() => {
  fetchWorkData();
});
let pageNo = ref<number>(1);
let limit = ref<number>(6);
let workData = ref<any>({});
const fetchWorkData = async () => {
  let res: HospitalWordData = await reqHospitalWork(
    pageNo.value,
    limit.value,
    String($route.query.hoscode),
    String($route.query.depcode)
  );
  console.log(res);
  if (res.code === 200) {
    workData.value = res.data;
  }
};
</script>

<style scoped lang="scss">
.wrap {
  .top {
    display: flex;
    color: #7f7f7f;
    margin: 0 10px;
    .dot,
    .line {
      margin: 0 5px;
    }
  }
  .center {
    margin-top: 100px;
    display: flex;
    flex-direction: column;
    align-items: center;
    h1 {
      font-weight: 900;
      margin: 20px 0;
    }
    .container {
      width: 100%;
      display: flex;
      margin: 30px 0;
      .item {
        flex: 1;
        border: 1px solid #7f7f7f;
        margin: 0 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        &.active {
          border: 1px solid #7f7f7f;
          color: #7f7f7f;
          .above {
            background-color: #f5f5f5;
          }
        }
      }
      .above {
        background-color: #e8f2ff;
        height: 30px;
        width: 100%;
        text-align: center;
      }
      .bottom {
        height: 40px;
        display: flex;
        justify-content: center;
        align-items: center;
      }
    }
  }
  .below {
    .will {
      text-align: center;
      font-size: 20px;
      font-weight: 600;
      margin: 10px 0;
      .time {
        color: rgba(31, 104, 183, 0.456);
      }
    }
    .doc {
      margin-top: 20px;
      .am,
      .pm {
        align-items: center;
        margin:15px 0;
        .docInfo {
          display: flex;
          justify-content: space-between;
          margin: 10px 0;
          border-bottom: 1px solid #7f7f7f;
          .left {
            .info {
              display: flex;
              color: skyblue;
              span {
                margin: 10px 5px;
                font-size: 18px;
              }
            }
            .skills {
              color: #7f7f7f;
            }
          }
          .right {
            width: 150px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            .money {
              color: #7f7f7f;
            }
          }
        }
      }
    }
  }
}
</style>